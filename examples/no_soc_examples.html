<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>non-SoC projects &mdash; Tiliqua  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/platformpicker.css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/platformpicker.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="DSP Library" href="../dsp/index.html" />
    <link rel="prev" title="SoC Projects" href="soc_examples.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Tiliqua
              <img src="../_static/logo.jpg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Quickstart</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/tlq_module.html">Tiliqua Module [<code class="docutils literal notranslate"><span class="pre">TLQ-MODULE</span></code>]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/tlq_screen.html">Tiliqua Screen [<code class="docutils literal notranslate"><span class="pre">TLQ-SCREEN</span></code>]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/tlq_expander.html">Expander / Euro-PMOD [<code class="docutils literal notranslate"><span class="pre">TLQ-EXPANDER</span></code>]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart/tlq_soldiercrab.html">Soldiercrab SoM [<code class="docutils literal notranslate"><span class="pre">TLQ-SOLDIERCRAB</span></code>]</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../building_flashing.html">Building and Flashing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../audio_bitstreams.html">Tutorial 1: Audio cores (<code class="docutils literal notranslate"><span class="pre">top.dsp</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../custom_dsp.html">Tutorial 2: DSP blocks (<code class="docutils literal notranslate"><span class="pre">tiliqua.dsp</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../beamrace_video.html">Tutorial 3: Video cores (<code class="docutils literal notranslate"><span class="pre">top.beamrace</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpu_bitstreams.html">Tutorial 4: SoC/CPU bitstreams</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bootloader.html">Bootloader</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Example Projects</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="soc_examples.html">SoC Projects</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">non-SoC projects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#all-projects">All Projects</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-top.dsp.top">dsp</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-top.beamrace.top">beamrace</a></li>
<li class="toctree-l4"><a class="reference internal" href="#usb-audio">usb_audio</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-top.usb_host.top">usb_host</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-top.vectorscope_no_soc.top">vectorscope_no_soc</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dsp/index.html">DSP Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../calibration.html">Calibration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Hardware Details</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../hardware_design.html">Electrical Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hardware_changes.html">Changelist</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Keep Updated</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../foss_funding.html">Funding &amp; Open Source</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devlog/index.html">Development Blog</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Links</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://apfaudio.github.io/tiliqua-webflash/">Tiliqua Webflasher</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.crowdsupply.com/apfaudio/tiliqua">Tiliqua on Crowd Supply</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/apfaudio/tiliqua">Tiliqua on GitHub</a></li>
<li class="toctree-l1"><a class="reference external" href="https://apf.audio/">Homepage (apf.audio)</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Tiliqua</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Example Projects</a></li>
      <li class="breadcrumb-item active">non-SoC projects</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/examples/no_soc_examples.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="non-soc-projects">
<h1>non-SoC projects<a class="headerlink" href="#non-soc-projects" title="Link to this heading"></a></h1>
<section id="all-projects">
<h2>All Projects<a class="headerlink" href="#all-projects" title="Link to this heading"></a></h2>
<section id="module-top.dsp.top">
<span id="dsp"></span><h3>dsp<a class="headerlink" href="#module-top.dsp.top" title="Link to this heading"></a></h3>
<p>Designs demoing parts of the DSP library. Build any of them as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># from `gateware` directory. Show all available example cores -</span>
pdm<span class="w"> </span>dsp<span class="w"> </span>-h

<span class="c1"># build an example core</span>
pdm<span class="w"> </span>dsp<span class="w"> </span>build<span class="w"> </span>--dsp-core<span class="w"> </span>nco
</pre></div>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="top.dsp.top.Mirror">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">top.dsp.top.</span></span><span class="sig-name descname"><span class="pre">Mirror</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#top.dsp.top.Mirror" title="Link to this definition"></a></dt>
<dd><p>Route audio inputs straight to outputs (in the audio domain).
This is the simplest possible core, useful for basic tests.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="top.dsp.top.QuadNCO">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">top.dsp.top.</span></span><span class="sig-name descname"><span class="pre">QuadNCO</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#top.dsp.top.QuadNCO" title="Link to this definition"></a></dt>
<dd><p>Audio-rate oscillator (NCO) with internal oversampling.
4 different waveform outputs.</p>
<p>TODO: We should really inject the cal for this one as
otherwise the V/oct is not calibrated. Yet to figure
out the easiest way to do so without an SoC.</p>
<p>in0: V/oct pitch
in1: phase modulation
out0: sine
out1: saw
out2: tri
out3: square</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="top.dsp.top.Resampler">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">top.dsp.top.</span></span><span class="sig-name descname"><span class="pre">Resampler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#top.dsp.top.Resampler" title="Link to this definition"></a></dt>
<dd><p>Resample different channels to a different sample rate (and back).
Not very musically interesting</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="top.dsp.top.ResonantFilter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">top.dsp.top.</span></span><span class="sig-name descname"><span class="pre">ResonantFilter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#top.dsp.top.ResonantFilter" title="Link to this definition"></a></dt>
<dd><p>High-, Low-, Bandpass with cutoff &amp; resonance control.</p>
<p>in0: audio in
in1: cutoff (0V == off, ~5V == open)
in2: resonance (0V == min, ~5V == crazy)</p>
<p>out0: LPF out
out1: HPF out
out2: BPF out</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="top.dsp.top.DualVCA">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">top.dsp.top.</span></span><span class="sig-name descname"><span class="pre">DualVCA</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#top.dsp.top.DualVCA" title="Link to this definition"></a></dt>
<dd><p>Audio-rate VCA.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="top.dsp.top.Pitch">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">top.dsp.top.</span></span><span class="sig-name descname"><span class="pre">Pitch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#top.dsp.top.Pitch" title="Link to this definition"></a></dt>
<dd><p>PSRAM-backed pitch shifter with CV-controlled pitch.
Grain size is quite large (~250ms) to reduce fluttering.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="top.dsp.top.Matrix">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">top.dsp.top.</span></span><span class="sig-name descname"><span class="pre">Matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#top.dsp.top.Matrix" title="Link to this definition"></a></dt>
<dd><p>Matrix mixer with fixed coefficients.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="top.dsp.top.DualWaveshaper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">top.dsp.top.</span></span><span class="sig-name descname"><span class="pre">DualWaveshaper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#top.dsp.top.DualWaveshaper" title="Link to this definition"></a></dt>
<dd><p>Soft distortion, channel 1/2 inputs, 3 is overdrive gain.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="top.dsp.top.TouchMixTop">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">top.dsp.top.</span></span><span class="sig-name descname"><span class="pre">TouchMixTop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#top.dsp.top.TouchMixTop" title="Link to this definition"></a></dt>
<dd><p>Matrix mixer, combine touch inputs in interesting ways.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="top.dsp.top.PSRAMPingPongDelay">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">top.dsp.top.</span></span><span class="sig-name descname"><span class="pre">PSRAMPingPongDelay</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#top.dsp.top.PSRAMPingPongDelay" title="Link to this definition"></a></dt>
<dd><p>2-channel stereo ping-pong delay, backed by external PSRAM.</p>
<p>2 delay lines are instantiated in isolated slices of the external
memory address space. Using external memory allows for much longer
delay times whilst using less resources, compared to SRAM-backed
delay lines, however on a larger design, you have to be careful
that PSRAM-backed delay lines don’t get starved by other PSRAM
traffic (i.e video framebuffer operations).</p>
<p>Tiliqua input 0/1 is stereo in, output 0/1 is stereo out.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="top.dsp.top.SRAMPingPongDelay">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">top.dsp.top.</span></span><span class="sig-name descname"><span class="pre">SRAMPingPongDelay</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#top.dsp.top.SRAMPingPongDelay" title="Link to this definition"></a></dt>
<dd><p>2-channel stereo ping-pong delay, backed by internal SRAM.</p>
<p>Tiliqua input 0/1 is stereo in, output 0/1 is stereo out.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="top.dsp.top.PSRAMDiffuser">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">top.dsp.top.</span></span><span class="sig-name descname"><span class="pre">PSRAMDiffuser</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#top.dsp.top.PSRAMDiffuser" title="Link to this definition"></a></dt>
<dd><p>PSRAM-backed 4-channel feedback delay, diffused by a matrix mixer.</p>
<p>A block diagram of the signal flow inside this demo:</p>
<a class="reference internal image-reference" href="../_images/diffusor.png"><img alt="../_images/diffusor.png" src="../_images/diffusor.png" style="width: 800px;" /></a>
<p>All 4 input channels are inputs.
All 4 output channels are outputs.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="top.dsp.top.SRAMDiffuser">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">top.dsp.top.</span></span><span class="sig-name descname"><span class="pre">SRAMDiffuser</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#top.dsp.top.SRAMDiffuser" title="Link to this definition"></a></dt>
<dd><p>SRAM-backed 4-channel feedback delay, diffused by a matrix mixer.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="top.dsp.top.PSRAMMultiDiffuser">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">top.dsp.top.</span></span><span class="sig-name descname"><span class="pre">PSRAMMultiDiffuser</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#top.dsp.top.PSRAMMultiDiffuser" title="Link to this definition"></a></dt>
<dd><p>Kind of ridiculous 3x chained diffusers (4x4 diffuser into 4x4 diffuser into 4x4 diffuser).</p>
<p>All 4 input channels are inputs.
All 4 output channels are outputs.</p>
<p>Be careful with the input amplitude on this one, it clips inside the diffuser multipliers
pretty easily and can be a bit unstable.</p>
<p>Sounds pretty close to a REALLY long reverb. A single diffuser suffices
for most real audio applications, but this one is a bit crazy :).</p>
<p>Its also useful for stress-testing the memory interface logic.</p>
<p>With 2x PSRAM-backed diffusers that’s 8x simultaneous 48kHz audio streams hitting the
PSRAM (4 write streams, 4 read streams). In simulation the PSRAM controller is blocking
~15% of the time. Looking at the traces it seems the cache is bursting twice as often
as it really needs to (in theory), so probably tweaking the cache architecture could
get the PSRAM bandwidth consumption down considerably.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="top.dsp.top.TripleMirror">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">top.dsp.top.</span></span><span class="sig-name descname"><span class="pre">TripleMirror</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#top.dsp.top.TripleMirror" title="Link to this definition"></a></dt>
<dd><p>Example of using extra (external) audio boards.</p>
<p>Route audio inputs to outputs on 3 audio boards simultaneously: the internal
one, and one on each PMOD expansion port. This core assumes all are connected,
but nothing bad will happen if one is missing (as long as the unused expansion
ports are left disconnected!)</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="top.dsp.top.STFTMirror">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">top.dsp.top.</span></span><span class="sig-name descname"><span class="pre">STFTMirror</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#top.dsp.top.STFTMirror" title="Link to this definition"></a></dt>
<dd><p>Simple test of the <code class="docutils literal notranslate"><span class="pre">STFTProcessor</span></code> component. Take channel 0,
convert blocks into frequency-domain spectra and back again, and
then emit the same time-domain signal out channel 0.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="top.dsp.top.Vocoder">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">top.dsp.top.</span></span><span class="sig-name descname"><span class="pre">Vocoder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#top.dsp.top.Vocoder" title="Link to this definition"></a></dt>
<dd><p>STFT-based spectral cross-synthesis (vocoder-like)</p>
<p>Channel 0 is the ‘carrier’, channel 1 is the ‘modulator’.
The spectral envelope of the modulator is applied to the
carrier in the frequency domain, the result of which is
emitted out channel 0.</p>
<p>Use relatively high levels and some compression on the
modulator to get decent intelligibility.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="top.dsp.top.Noise">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">top.dsp.top.</span></span><span class="sig-name descname"><span class="pre">Noise</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#top.dsp.top.Noise" title="Link to this definition"></a></dt>
<dd><p>Digital white noise, output on channel 0.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="top.dsp.top.DWO">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">top.dsp.top.</span></span><span class="sig-name descname"><span class="pre">DWO</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#top.dsp.top.DWO" title="Link to this definition"></a></dt>
<dd><p>Superimposed detuned sinusoids from a digital waveguide oscillator.</p>
<p>Not tunable, but an interesting experiment.</p>
</dd></dl>

</section>
<section id="module-top.beamrace.top">
<span id="beamrace"></span><h3>beamrace<a class="headerlink" href="#module-top.beamrace.top" title="Link to this heading"></a></h3>
<p>Simple video generation cores ‘racing the beam’, where the color of every pixel
is calculated right before it is sent to the screen.</p>
<p>Every ‘pattern core’ takes the signals in <code class="docutils literal notranslate"><span class="pre">BeamRaceInputs</span></code> (current pixel, current
audio samples), and emits the signals in <code class="docutils literal notranslate"><span class="pre">BeamRaceOutputs</span></code> (output pixel color).</p>
<p>Each ‘pattern core’ is wrapped by <code class="docutils literal notranslate"><span class="pre">BeamRaceTop</span></code> depending on which one is selected
via the CLI, for example <code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">beamracer</span> <span class="pre">build</span> <span class="pre">--core=stripes</span></code> will build a
<code class="docutils literal notranslate"><span class="pre">BeamRaceTop</span></code> that contains the <code class="docutils literal notranslate"><span class="pre">Stripes</span></code> pattern core. The mapping is in <code class="docutils literal notranslate"><span class="pre">CORES</span></code>
below.</p>
<p>Inside each ‘pattern core’, signals can be considered already synchronized into the ‘dvi’
domain - a <code class="docutils literal notranslate"><span class="pre">DomainRenamer</span></code> maps this to the <code class="docutils literal notranslate"><span class="pre">sync</span></code> domain in each pattern core. So,
inside the pattern cores, you can assume everything is in the <code class="docutils literal notranslate"><span class="pre">sync</span></code> domain, which is
at the pixel clock.</p>
<p>A simulation testbench <code class="docutils literal notranslate"><span class="pre">sim.cpp</span></code> is provided, so you can simulate new cores by using
<code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">beamrace</span> <span class="pre">sim</span> <span class="pre">--core=&lt;my_core&gt;</span></code>, which will emit bitmaps for the simulated frames.
In the simulation testbench, sine and cosine waves are sent into the ‘fake’ audio inputs.</p>
<dl class="py class">
<dt class="sig sig-object py" id="top.beamrace.top.BeamRaceInputs">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">top.beamrace.top.</span></span><span class="sig-name descname"><span class="pre">BeamRaceInputs</span></span><a class="headerlink" href="#top.beamrace.top.BeamRaceInputs" title="Link to this definition"></a></dt>
<dd><p>Inputs into a beamracing core, all in the ‘dvi’ domain (at the pixel clock).</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="top.beamrace.top.BeamRaceOutputs">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">top.beamrace.top.</span></span><span class="sig-name descname"><span class="pre">BeamRaceOutputs</span></span><a class="headerlink" href="#top.beamrace.top.BeamRaceOutputs" title="Link to this definition"></a></dt>
<dd><p>Outputs from a beamracing core, all in the ‘dvi’ domain (at the pixel clock).</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="top.beamrace.top.Stripes">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">top.beamrace.top.</span></span><span class="sig-name descname"><span class="pre">Stripes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#top.beamrace.top.Stripes" title="Link to this definition"></a></dt>
<dd><p>Beamracing pattern core.
Translated from ‘Stripes’ from <a class="reference external" href="https://vga-playground.com">https://vga-playground.com</a></p>
<dl class="simple">
<dt>Original attribution:</dt><dd><p>Copyright (c) 2024 Uri Shaked
SPDX-License-Identifier: Apache-2.0</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="top.beamrace.top.Balls">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">top.beamrace.top.</span></span><span class="sig-name descname"><span class="pre">Balls</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#top.beamrace.top.Balls" title="Link to this definition"></a></dt>
<dd><p>Beamracing pattern core.
Translated from ‘Balls’ from vga-playground.com</p>
<p>Edits: some added registers to make timing more FPGA friendly.</p>
<dl class="simple">
<dt>Original attribution:</dt><dd><p>Copyright (c) 2024 Renaldas Zioma
based on the VGA examples by Uri Shaked
SPDX-License-Identifier: Apache-2.0</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="top.beamrace.top.Checkers">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">top.beamrace.top.</span></span><span class="sig-name descname"><span class="pre">Checkers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#top.beamrace.top.Checkers" title="Link to this definition"></a></dt>
<dd><p>Beamracing pattern core.
Translated from ‘Checkers’ from vga-playground.com</p>
<p>Edits: 1 layer removed, some added registers for friendlier timing.</p>
<dl class="simple">
<dt>Original attribution:</dt><dd><p>Copyright (c) 2024 Renaldas Zioma
based on the VGA examples by Uri Shaked
SPDX-License-Identifier: Apache-2.0</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="top.beamrace.top.BeamRaceTop">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">top.beamrace.top.</span></span><span class="sig-name descname"><span class="pre">BeamRaceTop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#top.beamrace.top.BeamRaceTop" title="Link to this definition"></a></dt>
<dd><p>Wrapper structure around beamracing cores.</p>
<p>Provides the clock, DVI timing generation and PHY, and interface to the audio IOs
(synchronized to the video domain), as well as ‘hold to enter bootloader’ logic.</p>
</dd></dl>

</section>
<section id="usb-audio">
<h3>usb_audio<a class="headerlink" href="#usb-audio" title="Link to this heading"></a></h3>
<p>4-channel USB2 audio interface, based on LUNA project.
Enumerates as a 4-in, 4-out 48kHz sound card.</p>
</section>
<section id="module-top.usb_host.top">
<span id="usb-host"></span><h3>usb_host<a class="headerlink" href="#module-top.usb_host.top" title="Link to this heading"></a></h3>
<p>Gateware-only USB MIDI host to CV converter.</p>
<p><strong>*WARN*</strong> because there is no SoC to do USB CC negotiation, this demo
hardwires the VBUS output to ON !!!</p>
<p>At the moment, all the MIDI traffic is routed to CV outputs according
to the existing example (see docstring) in <code class="docutils literal notranslate"><span class="pre">tiliqua.midi:MonoMidiCV</span></code>.</p>
</section>
<section id="module-top.vectorscope_no_soc.top">
<span id="vectorscope-no-soc"></span><h3>vectorscope_no_soc<a class="headerlink" href="#module-top.vectorscope_no_soc.top" title="Link to this heading"></a></h3>
<p>CRT / Vectorscope simulator.
Rasterizes X/Y (audio channel 0, 1) and color (audio channel 3) to a simulated
CRT display, with intensity gradient and afterglow effects.</p>
<p>Simple gateware-only version, this is mostly useful for debugging the
memory and video subsystems with an ILA or simulation, as it’s smaller.</p>
<p>Passing the <code class="docutils literal notranslate"><span class="pre">--spectrogram</span></code> passes frequency and magnitude information
to the plotter (from channel 0) instead of just passing through X and Y.</p>
<p>See ‘xbeam’ for SoC version of the scope with a menu system.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># for visualizing the color palette</span>
$<span class="w"> </span>pdm<span class="w"> </span>colors_vectorscope
</pre></div>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="top.vectorscope_no_soc.top.VectorScopeTop">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">top.vectorscope_no_soc.top.</span></span><span class="sig-name descname"><span class="pre">VectorScopeTop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#top.vectorscope_no_soc.top.VectorScopeTop" title="Link to this definition"></a></dt>
<dd><p>Top-level Vectorscope design.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="top.vectorscope_no_soc.top.colors">
<span class="sig-prename descclassname"><span class="pre">top.vectorscope_no_soc.top.</span></span><span class="sig-name descname"><span class="pre">colors</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#top.vectorscope_no_soc.top.colors" title="Link to this definition"></a></dt>
<dd><p>Render image of intensity/color palette used internally by DMAFramebuffer.
This is useful for quickly tweaking it.</p>
</dd></dl>

</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="soc_examples.html" class="btn btn-neutral float-left" title="SoC Projects" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../dsp/index.html" class="btn btn-neutral float-right" title="DSP Library" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024—2026, S. Holzapfel and Tiliqua contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>